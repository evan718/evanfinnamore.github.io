<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Book Appointment | Evan Finnamore Counselling Services</title>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    .booking-container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 1rem;
    }
    
    .date-picker {
      margin-bottom: 2rem;
    }
    
    .time-slots {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    .time-slot {
      padding: 1rem;
      border: 1px solid #ddd;
      border-radius: 4px;
      cursor: pointer;
      text-align: center;
      transition: all 0.3s ease;
    }
    
    .time-slot:hover {
      background-color: #f0f0f0;
    }
    
    .time-slot.selected {
      background-color: #4CAF50;
      color: white;
    }
    
    .booking-form {
      max-width: 500px;
      margin: 0 auto;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
    }
    
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.5rem;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    
    .submit-btn {
      background-color: #4CAF50;
      color: white;
      padding: 0.75rem 1.5rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 1rem;
    }
    
    .submit-btn:hover {
      background-color: #45a049;
    }

    .unavailable {
      color: #999;
      font-style: italic;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="container">
      <h1>Evan Finnamore Counselling Services</h1>
      <nav>
        <ul>
          <li><a href="./index.html">Home</a></li>
          <li><a href="./about.html">About Me</a></li>
          <li><a href="./services.html">Services</a></li>
          <li><a href="./appointment.html">Book Appointment</a></li>
          <li><a href="./links.html">Useful Links</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- Main Content -->
  <main>
    <div class="container">
      <h2>Book an Appointment</h2>
      <p>Please select an available date and time slot for your appointment.</p>
      
      <div class="booking-container">
        <div class="date-picker">
          <label for="appointment-date">Select Date:</label>
          <input type="date" id="appointment-date" min="" onchange="updateTimeSlots()">
        </div>
        
        <div class="time-slots" id="time-slots">
          <!-- Time slots will be populated by JavaScript -->
        </div>
        
        <div class="booking-form" id="booking-form" style="display: none;">
          <h3>Complete Your Booking</h3>
          <form id="appointment-form" onsubmit="handleSubmit(event)">
            <div class="form-group">
              <label for="name">Full Name:</label>
              <input type="text" id="name" required>
            </div>
            
            <div class="form-group">
              <label for="email">Email:</label>
              <input type="email" id="email" required>
            </div>
            
            <div class="form-group">
              <label for="phone">Phone:</label>
              <input type="tel" id="phone" required>
            </div>
            
            <div class="form-group">
              <label for="notes">Additional Notes:</label>
              <textarea id="notes" rows="4"></textarea>
            </div>
            
            <button type="submit" class="submit-btn">Request Appointment</button>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <p>&copy; 2024 Evan Finnamore Counselling Services. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // Your available time slots configuration
    const availableSlots = {
      // Monday slots
      "2024-10-28": ["09:00", "10:00", "11:00", "14:00", "15:00"],
      // Tuesday slots
      "2024-10-29": ["09:00", "10:00", "11:00", "14:00", "15:00"],
      // Add more dates as needed
    };

    // Initialize date picker
    const datePicker = document.getElementById('appointment-date');
    datePicker.min = new Date().toISOString().split('T')[0];
    
    function updateTimeSlots() {
      const selectedDate = datePicker.value;
      const timeSlotsContainer = document.getElementById('time-slots');
      timeSlotsContainer.innerHTML = '';
      
      // Hide booking form when date changes
      document.getElementById('booking-form').style.display = 'none';
      
      if (!selectedDate) {
        timeSlotsContainer.innerHTML = '<p class="unavailable">Please select a date</p>';
        return;
      }
      
      const slots = availableSlots[selectedDate] || [];
      
      if (slots.length === 0) {
        timeSlotsContainer.innerHTML = '<p class="unavailable">No available appointments on this date</p>';
        return;
      }
      
      slots.forEach(time => {
        const timeSlot = document.createElement('div');
        timeSlot.className = 'time-slot';
        timeSlot.textContent = formatTime(time);
        timeSlot.onclick = () => selectTimeSlot(time, timeSlot);
        timeSlotsContainer.appendChild(timeSlot);
      });
    }
    
    function formatTime(time) {
      const [hours, minutes] = time.split(':');
      const date = new Date();
      date.setHours(parseInt(hours), parseInt(minutes));
      return date.toLocaleTimeString('en-US', { 
        hour: 'numeric', 
        minute: '2-digit', 
        hour12: true 
      });
    }
    
    function selectTimeSlot(time, element) {
      // Remove selected class from all slots
      document.querySelectorAll('.time-slot').forEach(slot => {
        slot.classList.remove('selected');
      });
      
      // Add selected class to clicked slot
      element.classList.add('selected');
      
      // Show booking form
      document.getElementById('booking-form').style.display = 'block';
    }
    
    function handleSubmit(event) {
      event.preventDefault();
      
      const selectedDate = datePicker.value;
      const selectedTime = document.querySelector('.time-slot.selected').textContent;
      
      // Collect form data
      const formData = {
        date: selectedDate,
        time: selectedTime,
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        notes: document.getElementById('notes').value
      };
      
      // Send email to your address (you'll need to set up email handling on your server)
      const emailBody = `
        New Appointment Request:
        
        Date: ${formData.date}
        Time: ${formData.time}
        Name: ${formData.name}
        Email: ${formData.email}
        Phone: ${formData.phone}
        Notes: ${formData.notes}
      `;
      
      // For now, we'll just show an alert
      alert('Thank you for your booking request! We will confirm your appointment shortly.');
      
      // Reset form
      event.target.reset();
      document.getElementById('booking-form').style.display = 'none';
      document.querySelector('.time-slot.selected').classList.remove('selected');
      updateTimeSlots();
    }
    
    // Initialize time slots
    updateTimeSlots();
  </script>
</body>
</html>
